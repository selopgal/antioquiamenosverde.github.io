<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>¿Casa verde?</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fullPage.js/3.1.2/fullpage.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Bodoni+Moda:ital,opsz,wght@0,6..96,400..900;1,6..96,400..900&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<!--Import materialize.css-->
<link type="text/css" rel="stylesheet" href="css/materialize.min.css"  media="screen,projection"/>
<link href="https://fonts.googleapis.com/css2?family=Gascogne+Serial&display=swap" rel="stylesheet">
<link type="text/css" rel="stylesheet" href="css/style.css"  media="screen,projection"/>


<!--Let browser know website is optimized for mobile-->
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<style>body {
    font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
    margin: 0;
    padding: 0;
    background-color: #3f0d16;
}

.section {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    text-align: center;
    width: 100vw;
    position: relative;
    display: layout;
background-color: #4c550f;
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
}

.aspect-ratio-wrapper {
    width: 100%;
    padding-top: 56.25%; /* 16:9 aspect ratio */
    position: relative;
    overflow: hidden;
}

.content {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    display: flex;
    justify-content: center;
    align-items: center;
}

.flourish-container {
width: 80%;
height: 500px;
position: relative;
overflow: hidden;
margin: auto;
display: flex;
justify-content: flex-start; /* Align charts to the start of the container */
}

.flourish-embed-iframe {
    width: 80%;
    height: 80%;
    display: block;
    transition: transform 2s ease;
    position: fixed;
}

.subtitles-container {
    display: flex;
    justify-content: space-around;
}



.flourish-embed {
    display: none;
    /* Hide all charts by default */
    transition: opacity 0.5s ease;
    /* Smooth transition for opacity */
}

.flourish-embed.active {
    display: block;
    /* Show the active chart */
}

.flourish-embed:first-child {
    display: block;
    /* Show only the first chart */
}

.textbox {
    margin: auto;
}

.textbox-2{
    position: absolute;
    bottom: 120px;
    left: 100px;
    right: px;
    top: 500px;
    max-width: 500px;

    padding: 20px;
    border-radius: 5px;
}
.textbox-3{
    position: absolute;
    bottom: 1500px;
    left: 100px;
    right: px;
    top: 00px;
    max-width: 500px;
    padding: 20px;
    border-radius: 5px;
}

.btn-container {
    margin-top: 20px;
}

.btn {
    background-color: #333;
    color: white;
    border: none;
    padding: 10px 20px;
    cursor: pointer;
    font-size: 16px;
    border-radius: 5px;
    margin: 0 10px;
}

.btn:hover {
    background-color: #555;
}

.nav-arrows {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    width: 40px;
    height: 40px;
    background-color: rgba(0, 0, 0, 0.5);
    border-radius: 50%;
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    color: white;
    font-size: 24px;
    z-index: 1;
    transition: background-color 0.3s ease;
}

.nav-arrows:hover {
    background-color: rgba(0, 0, 0, 0.8);
}

.prev-arrow {
    left: 10px;
}

.next-arrow {
    right: 10px;
}
@font-face {
font-family: "GascogneSerialRegular";
src: url('webFonts/GascogneSerialRegular/font.woff2') format('woff2'), url('webFonts/GascogneSerialRegular/font.woff') format('woff');
}
.popup {
    display: none;
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    padding: 20px;
    background-color: #fff;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
    max-width: 80%;
    z-index: 1000;
}</style>
</head>

<body>
    <div id="fullpage">
        <div class="section" style="background-image: url(https://res.cloudinary.com/dlkn4vhcj/image/upload/v1707780617/IMG_9345_uxpqlz.jpg);">
            <div class="content">
                <h2 style="color: #f0f0f0; font-weight:bolder; font-size: 35pt;position:absolute;top:600px;font-family: 'GascogneSerialRegular';">Si los bosques pudieran hablar, ¿qué historias nos contarían?</h2>
            </div>
        </div>
        <div class="section"; style="background-image: url(https://res.cloudinary.com/dlkn4vhcj/image/upload/v1707780616/20221225054431_IMG_7612_1_kkgdhy.jpg);">

                <h2 style="color: #f0f0f0; font-weight:bolder;">TíTULO</h2>
                <div class="textbox">
                    <p style="color: #f0f0f0;">Descripción</p>
                    <div class="textbox"; style="position: relative;color: #f0f0f0;text-align: center;top: 250px";>
                    <p style="color: #f0f0f0;text-align: center;top: 450px;">Natalia Bedoya Alcaraz, Sebastián Castro y Sebastián López Galvis</p>
                </div>
            </div>
        </div>

        <div class="section"; style="background-image: url(https://res.cloudinary.com/dlkn4vhcj/image/upload/v1707780621/20230104060910_IMG_7766_ti3kyi.jpg);">
                <div class="espacio" style="padding-left:700px;";> <iframe title="Porcentaje de bosque deforestado (2001-2022)" aria-label="Map" id="datawrapper-chart-M4L89" src="https://datawrapper.dwcdn.net/M4L89/12/" scrolling="yes" frameborder="0" style="width: 600px; border: none; height:610px" data-external="1"></iframe><script type="text/javascript">!function(){"use strict";window.addEventListener("message",(function(a){if(void 0!==a.data["datawrapper-height"]){var e=document.querySelectorAll("iframe");for(var t in a.data["datawrapper-height"])for(var r=0;r<e.length;r++)if(e[r].contentWindow===a.source){var i=a.data["datawrapper-height"][t]+"px";e[r].style.height=i}}}))}();
                </script>
                <div class="textbox-2">
                    <p style="position: absolute;top: -50px;width: 500px;font-size: 25px; text-align: justify;color: #fff;font-weight: 300;">En Antioquia hay 7 municipios que han perdido <b style="font-weight: bold;">más de una cuarta parte de su bosque en los últimos 20 años</b>. Las regiones del <b style="font-weight: bold">Nordeste y Magdalena medio</b> son las zonas con cifras más críticas de deforestación en este periodo de tiempo.</p>
                </div>
                    <div class="textbox-3">
                        <p style="text-align: center;width: 500px;font-size: 80px; text-align: start; font-weight:bold; color: #2d3329; font-family: 'GascogneSerialRegular';">¿Nuestra casa sigue siendo verde?</p>

                    
                </div>
    </div>
    </div>

    <div class="section"; style="background-image: url(https://res.cloudinary.com/dlkn4vhcj/image/upload/v1707780621/20230104060910_IMG_7766_ti3kyi.jpg);">
            <div class="content">
                <div class="subtitles-container">
                    <div class="subtitle-container">
                        <h3 style="color:#680a22; text-shadow:
                        -1px -1px 0 #fff,
                        1px -1px 0 #fff,
                        -1px 1px 0 #fff,
                        1px 1px 0 #fff;" class="percentage">-34,7%</h3>
                        <p style="font-weight: bold; color: #fff;" class="subtitle">REMEDIOS</p>
                    </div>
                    <div class="subtitle-container">
                        <h3 style="color:#680a22; text-shadow:
                        -1px -1px 0 #fff,
                        1px -1px 0 #fff,
                        -1px 1px 0 #fff,
                        1px 1px 0 #fff;" class="percentage">-30,65%</h3>
                        <p style="font-weight: bold; color: #fff;" class="subtitle">SEGOVIA</p>
                    </div>
                    <div class="subtitle-container">
                        <h3 style="color:#680a22; text-shadow:
                        -1px -1px 0 #fff,
                        1px -1px 0 #fff,
                        -1px 1px 0 #fff,
                        1px 1px 0 #fff;" class="percentage">-27%</h3>
                        <p style="font-weight: bold; color: #fff;" class="subtitle">YONDÓ</p>
                    </div>
                    <div class="subtitle-container">
                        <h3 style="color:#680a22; text-shadow:
                        -1px -1px 0 #fff,
                        1px -1px 0 #fff,
                        -1px 1px 0 #fff,
                        1px 1px 0 #fff;" class="percentage">-26,7%</h3>
                        <p style="font-weight: bold; color: #fff;" class="subtitle">VEGACHÍ</p>
                    </div>
                    <div class="subtitle-container">
                        <h3 style="color:#680a22; text-shadow:
                        -1px -1px 0 #fff,
                        1px -1px 0 #fff,
                        -1px 1px 0 #fff,
                        1px 1px 0 #fff;" class="percentage">-25%</h3>
                        <p style="font-weight: bold; color: #fff;" class="subtitle">PUERTO BERRIO</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="section"; style="background-image: url(https://res.cloudinary.com/dlkn4vhcj/image/upload/v1707791887/20230315005434_IMG_8296_flgr47.jpg);">
            <div class="content">
                    <iframe src='https://flo.uri.sh/visualisation/16552053/embed' title='Interactive or visual content' class='flourish-embed-iframe' frameborder='0' scrolling='no' style='width: 70%; height: 60vh; position: absolute;bottom: 250px;' sandbox='allow-same-origin allow-forms allow-scripts allow-downloads allow-popups allow-popups-to-escape-sandbox allow-top-navigation-by-user-activation'></iframe>
                </div>
                <div class="textbox-2"; style="position: absolute; left: 400px;right: 200px; top:550px;font-size: 20px; text-align: justify;color: #fff;font-weight: 300;max-width: 600px;">
                    <p>Remedios, Segovia, Yondó, Puerto Berrio y Vegachí encabezan esta la lista y hacen parte de los 28 municipios de Antioquia identificados en los Núcleos de Alta Deforestación (NAD) del país según el Plan Estratégico del Programa para el Control de la Deforestación y Gestión Sostenible de los Bosques en Antioquia. Uno de los núcleos es la Serranía de San Lucas que se extiende por los tres municipios más deforestados.</p>
                
            </div>
        </div>

        <div class="section"; style="background-image: url(https://res.cloudinary.com/dlkn4vhcj/image/upload/v1707780620/20230314231659_IMG_8238_sgsteo.jpg);">
            <div class="content">
                <div class="subtitles-container">
                    <div class="subtitle-container">
                        <p class="subtitle">UdeA</p>
                    </div>
                    <div class="subtitle-container">
                        <p class="subtitle">Medellín</p>
                    </div>
                    <div class="subtitle-container">
                        <p class="subtitle">Bogotá</p>
                    </div>
                </div>
            </div>
        </div>
       
        <div class="section"; style="background-image: url(https://res.cloudinary.com/dlkn4vhcj/image/upload/v1707780617/IMG_9345_uxpqlz.jpg);">
            <div class="content" style="position: center;">
                <h2 style="color: black; font-weight:bolder; font-size: 20pt;position:absolute;bottom:650px;">¿Qué nos muestran las tendencias?</h2>
                <div class="flourish-container">
                    <iframe src='https://flo.uri.sh/visualisation/16723365/embed' title='Interactive or visual content' class='flourish-embed-iframe' frameborder='0' scrolling='no' style='width:70%;height:600px;' sandbox='allow-same-origin allow-forms allow-scripts allow-downloads allow-popups allow-popups-to-escape-sandbox allow-top-navigation-by-user-activation'></iframe>
                    <iframe src='https://flo.uri.sh/visualisation/16723357/embed' title='Interactive or visual content' class='flourish-embed-iframe' frameborder='0' scrolling='no' style='width:70%;height:600px;' sandbox='allow-same-origin allow-forms allow-scripts allow-downloads allow-popups allow-popups-to-escape-sandbox allow-top-navigation-by-user-activation'></iframe>
                    <iframe src='https://flo.uri.sh/visualisation/16723348/embed' title='Interactive or visual content' class='flourish-embed-iframe' frameborder='0' scrolling='no' style='width:70%;height:600px;' sandbox='allow-same-origin allow-forms allow-scripts allow-downloads allow-popups allow-popups-to-escape-sandbox allow-top-navigation-by-user-activation'></iframe>
                    <iframe src='https://flo.uri.sh/visualisation/16723341/embed' title='Interactive or visual content' class='flourish-embed-iframe' frameborder='0' scrolling='no' style='width:70%;height:600px;' sandbox='allow-same-origin allow-forms allow-scripts allow-downloads allow-popups allow-popups-to-escape-sandbox allow-top-navigation-by-user-activation'></iframe>
                    <iframe src='https://flo.uri.sh/visualisation/15834790/embed' title='Interactive or visual content' class='flourish-embed-iframe' frameborder='0' scrolling='no' style='width:70%;height:600px;' sandbox='allow-same-origin allow-forms allow-scripts allow-downloads allow-popups allow-popups-to-escape-sandbox allow-top-navigation-by-user-activation'></iframe>
                </div>
                <div class="nav-arrows prev-arrow" onclick="changeChart(-1)">&#10094;</div>
                <div class="nav-arrows next-arrow" onclick="changeChart(1)">&#10095;</div>
            </div>
        </div>
        
            

        <div class="section"; style="background-image: url(https://res.cloudinary.com/dlkn4vhcj/image/upload/v1707780613/IMG_0280_njcwxu.jpg);">
            <div class="content">

                <div class="textbox">
                    <div class="textbox-2"; style="position: absolute; left: 400px;right: 200px;top: 250px;bottom: 0;font-size: 20px; text-align: justify;color: #fff;font-weight: 300;max-width: 600px;">
                        <p>Remedios, Segovia, Yondó, Puerto Berrio y Vegachí encabezan esta la lista y hacen parte de los 28 municipios de Antioquia identificados en los Núcleos de Alta Deforestación (NAD) del país según el Plan Estratégico del Programa para el Control de la Deforestación y Gestión Sostenible de los Bosques en Antioquia. Uno de los núcleos es la Serranía de San Lucas que se extiende por los tres municipios más deforestados.</p>
                    </div>
            </div>
        </div>
    </div>
                

    <div class="section" style="background-image: url(https://res.cloudinary.com/dlkn4vhcj/image/upload/v1707780613/IMG_0280_njcwxu.jpg);">
        <div id="popup" class="popup">
            <p>This is a popup!</p>
            <button onclick="hidePopup()">Close</button>
        </div>
    
        <!-- Button to show the popup -->
        <button onclick="showPopup()">Show Popup</button>
    
        <!-- Your existing JavaScript code -->
    </div>

    <div class="section"; style="background-image: url(https://res.cloudinary.com/dlkn4vhcj/image/upload/v1707780617/IMG_9345_uxpqlz.jpg);">
        <div class="content" style="position: center;">
            <h2 style="color: black; font-weight:bolder; font-size: 20pt;position:absolute;bottom:650px;">¿Qué nos muestran las tendencias?</h2>
            <div class="flourish-container">
                <iframe src='https://flo.uri.sh/visualisation/16796839/embed' title='Interactive or visual content' class='flourish-embed-iframe' frameborder='0' scrolling='no' style='width:70%;height:600px;' sandbox='allow-same-origin allow-forms allow-scripts allow-downloads allow-popups allow-popups-to-escape-sandbox allow-top-navigation-by-user-activation'></iframe>
                <iframe src='https://flo.uri.sh/visualisation/16796558/embed' title='Interactive or visual content' class='flourish-embed-iframe' frameborder='0' scrolling='no' style='width:70%;height:600px;' sandbox='allow-same-origin allow-forms allow-scripts allow-downloads allow-popups allow-popups-to-escape-sandbox allow-top-navigation-by-user-activation'></iframe>
        </div>
        <div class="nav-arrows prev-arrow" onclick="changeChart(-1)">&#10094;</div>
        <div class="nav-arrows next-arrow" onclick="changeChart(1)">&#10095;</div>
    </div>
    </div>

    <script>
                function showPopup() {
            document.getElementById("popup").style.display = "block";
        }

        function hidePopup() {
            document.getElementById("popup").style.display = "none";
        }

        let currentChartIndex = 0;

        function showChart(index) {
            const iframes = document.querySelectorAll('.flourish-embed-iframe');
            iframes.forEach((iframe, idx) => {
                if (idx === index) {
                    iframe.style.display = 'block';
                } else {
                    iframe.style.display = 'none';
                }
            });
            currentChartIndex = index;
        }

        function changeChart(step) {
    const iframes = document.querySelectorAll('.flourish-embed-iframe');
    let newIndex = currentChartIndex + step;

    if (newIndex < 0) {
        newIndex = iframes.length - 1;
    } else if (newIndex >= iframes.length) {
        newIndex = 0;
    }

    // Hide all charts
    iframes.forEach((iframe, index) => {
        iframe.style.display = 'none';
    });

    // Show the selected chart
    iframes[newIndex].style.display = 'block';

    // Update current chart index
    currentChartIndex = newIndex;
}
        
        function isInViewport(element) {
            const rect = element.getBoundingClientRect(); // Obtener los límites del elemento
            return (
                rect.top >= 0 &&
                rect.left >= 0 &&
                rect.bottom <= (window.innerHeight || document.documentElement.clientHeight) &&
                rect.right <= (window.innerWidth || document.documentElement.clientWidth)
            );
        }
        

        function animatePercentagesIfVisible() {
            const percentages = document.querySelectorAll('.percentage');
            console.log(percentages);

            percentages.forEach(percentage => {
                if (isInViewport(percentage)) { // Si el elemento es visible en la ventana
                    const targetPercentage = parseFloat(percentage.textContent.replace(',', '.')); // Reemplaza la coma por un punto y luego convierte a número
                    let currentPercentage = 0; // Valor actual del porcentaje

                    // Función de animación para aumentar el porcentaje
                    const animatePercentage = () => {
                        if (currentPercentage !== targetPercentage) {
                            if (currentPercentage < targetPercentage) {
                                currentPercentage = Math.min(targetPercentage, currentPercentage + 0.01); // Aumenta gradualmente por 0.01
                            } else {
                                currentPercentage = Math.max(targetPercentage, currentPercentage - 0.01); // Disminuye gradualmente por 0.01
                            }
                            percentage.innerText = currentPercentage.toFixed(2) + "%"; // Actualiza el contenido del elemento de porcentaje y limita a dos decimales
                            percentage.style.fontSize = (20 + (currentPercentage / targetPercentage) * 40) + "px"; // Ajusta el tamaño de la fuente basado en el progreso
                            setTimeout(animatePercentage, 0.5); // Llama a la función nuevamente después de un breve retraso
                        }
                    };

                    animatePercentage(); // Inicia la animación
                }
            });
        }

        function scrollToNext() {
            const currentSection = document.querySelector('section.active');
            const nextSection = currentSection.nextElementSibling;
            if (nextSection) {
                currentSection.classList.remove('active');
                nextSection.classList.add('active');
                nextSection.scrollIntoView({
                    behavior: 'smooth'
                });
            }
        }

        document.addEventListener('DOMContentLoaded', function () {
        new fullpage('#fullpage', {
            autoScrolling: true,
            fitToSection: true,
            fitToSectionDelay: 1000,
            scrollBar: false,
            navigation: false,
            controlArrows: false,
            slidesNavigation: false,
            loopHorizontal: false,
            scrollOverflow: false,
            scrollOverflowReset: false,
            touchSensitivity: 15,
            keyboardScrolling: true, // Enable keyboard scrolling
            animateAnchor: true,
            recordHistory: true,
            menu: '#menu',
            anchors: ['reportaje', 'section1', 'subtitulos', 'graficos', 'tendencias'], // Add more anchors if needed
            afterLoad: function (origin, destination, direction) {
                animatePercentagesIfVisible();
            },
            afterRender: function () {
                animatePercentagesIfVisible();
            }
        });
    });

  document.addEventListener('DOMContentLoaded', function() {
    var elems = document.querySelectorAll('.modal');
    var instances = M.Modal.init(elems, options);
  });
    </script>
    <script type="text/javascript" src="js/materialize.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fullPage.js/3.1.2/fullpage.min.js"></script>
</body>

</html>
